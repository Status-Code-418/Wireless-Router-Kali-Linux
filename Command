sudo apt update && sudo apt upgrade -y

# hostapd, dnsmasq, iptables-persistent install command
sudo apt install hostapd dnsmasq iptables-persistent -y

ip a  // or ifconfig

sudo nano /etc/network/interfaces

auto wlan0
iface wlan0 inet static
	address 10.10.0.1
	netmask 255.255.255.0

[Ctrl] + [o]

[Ctrl] + [x]

sudo nano /etc/dnsmasq.conf

interface=wlan0		# Wireless NIC
dhcp-range=10.10.0.2,10.10.0.254,255.255.255.0,24h

[Ctrl] + [o]

[Ctrl] + [x]

sudo nano /etc/hostapd/hostapd.conf

interface=wlan0
driver=nl80211
ssid=WiFi-Test		// WiFi SSID
hw_mode=g
channel=6
wmm_enabled=0
macaddr_acl=0
auth_algs=1
ignore_broadcast_ssid=0
wpa=2
wpa_passphrase=12345678		// WiFi password
rsn_pairwise=CCMP

[Ctrl] + [o]

[Ctrl] + [x]

sudo nano /etc/default/hostapd

DAEMON_CONF="/etc/hostapd/hostapd.conf"

[Ctrl] + [o]

[Ctrl] + [x]

echo "net.ipv4.ip_forward=1" | sudo tee -a /etc/sysctl.conf

sudo sysctl -p

sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE

sudo iptables-save | sudo tee /etc/iptables/rules.v4

sudo systemctl restart dnsmasq

sudo systemctl unmask hostapd

sudo systemctl enable hostapd

sudo systemctl start hostapd

sudo systemctl enable dnsmasq

sudo systemctl enable hostapd

sudo nano /etc/init.d/iptablesload

#!/bin/sh
### BEGIN INIT INFO
# Provides:          iptablesload
# Required-Start:    $local_fs $network
# Required-Stop:     $local_fs $network
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Load iptables rules
### END INIT INFO

/sbin/iptables-restore < /etc/iptables/rules.v4

sudo chmod +x /etc/init.d/iptablesload

sudo update-rc.d iptablesload defaults

sudo iptables-save | sudo tee /etc/iptables/rules.v4

reboot

# Node WiFi connect

sudo sysctl -p

sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE

ifconfig
